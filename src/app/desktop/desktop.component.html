<div #surface (contextmenu)="showContextMenu($event)" (mousedown)="checkWindowUnfocus($event); hideStartMenu()"
     [style.background]="getBackground()" id="desktop-surface">
  <h1 id="version-info">Pre-Alpha 2.0</h1>

  <div
    class="linkage" *ngFor="let linkage of onDesktop(); index as i"
    [ngStyle]="{'left.vw': linkage.position.x | px2vw, 'top.vh': linkage.position.y | px2vh, zIndex: linkage.position.z }"
    (mousedown)="linkageMouseDown($event, i)" (dblclick)="openProgramWindow(linkage)"
  ><img [src]="linkage.icon" alt="">{{linkage.displayName}}</div>

  <app-window-manager
    *ngFor="let device of devices; trackBy: trackByUUID" [device]="device"
    [hidden]="device.uuid !== activeDevice.uuid"
  ></app-window-manager>

  <app-context-menu
    (mouseleave)="hideContextMenu()" *ngIf="contextMenu" [position]="contextMenuPosition"
  ></app-context-menu>
</div>
<app-desktop-startmenu *ngIf="startMenu" [parent]="this" [target]="contextMenuTarget"></app-desktop-startmenu>
<app-desktop-menu [windowManager]="windowManager" (startMenu)="toggleStartMenu()"></app-desktop-menu>
